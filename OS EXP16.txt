#include <stdio.h>
#include <stdlib.h>

struct emp {
    int id;
    char name[20];
    float salary;
};

int main() {
    FILE *fp;
    struct emp e;
    int choice, pos;

    fp = fopen("employee.dat", "rb+");
    if (!fp) fp = fopen("employee.dat", "wb+");

    while (1) {
        printf("\n1. Add Employee\n2. Display\n3. Random Read\n4. Exit\nChoice: ");
        scanf("%d", &choice);

        if (choice == 1) {
            printf("Enter ID Name Salary: ");
            scanf("%d %s %f", &e.id, e.name, &e.salary);
            fseek(fp, 0, SEEK_END);
            fwrite(&e, sizeof(e), 1, fp);
        }
        else if (choice == 2) {
            rewind(fp);
            while (fread(&e, sizeof(e), 1, fp))
                printf("%d %s %.2f\n", e.id, e.name, e.salary);
        }
        else if (choice == 3) {
            printf("Enter record number: ");
            scanf("%d", &pos);
            fseek(fp, (pos-1)*sizeof(e), SEEK_SET);
            if (fread(&e, sizeof(e), 1, fp))
                printf("ID=%d Name=%s Salary=%.2f\n", e.id, e.name, e.salary);
            else
                printf("Record not found.\n");
        }
        else 
            break;
    }
    fclose(fp);
    return 0;
}
